<h1 mat-dialog-title>Exporter les données de la bannette</h1>
<div mat-dialog-content>
    <div *ngIf="loadingExport" class="loader">
        <mat-spinner></mat-spinner>
    </div>
    <div class="row">
        <div class="col-md-6">
            <mat-form-field appearance="outline">
                <mat-label>Délimiteur</mat-label>
                <mat-select placeholder="Délimiteur" [(ngModel)]="exportModel.delimiter">
                    <mat-option *ngFor="let delimiter of delimiters" [value]="delimiter">
                        {{delimiter}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="col-md-6">
            <mat-form-field appearance="outline">
                <mat-label>Encodage</mat-label>
                <mat-select placeholder="Encodage" [(ngModel)]="exportModel.encoding">
                    <mat-option *ngFor="let encoding of encodings" [value]="encoding">
                        {{encoding}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
    </div>
    <mat-accordion>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Donnée(s) d'exportation
                </mat-panel-title>
            </mat-expansion-panel-header>

            <div class="row">
                <div class="col-md-12">
                    <mat-form-field appearance="outline" class="listFilter">
                        <input matInput placeholder="Rechercher une donnée" #listFilter cdkFocusInitial>
                    </mat-form-field>
                </div>
            </div>
            <div class="row exportList">
                <div class="col-md-6 available-data">
                    <h2><span class="title">Donnée(s) disponible(s)</span> <i class="fa fa-plus-circle removeAllDatas" color="primary" title="Ajouter toutes les données disponibles" (click)="addAllData()"></i></h2>
                    <div cdkDropList #dataAvailableList="cdkDropList" [cdkDropListData]="dataAvailable"
                        [cdkDropListConnectedTo]="[dataExportList]" class="cdk-list" (cdkDropListDropped)="drop($event)">
                        <div class="columns" *ngFor="let item of dataAvailable | filterList:listFilter.value:'label';let i=index"
                            cdkDrag id="{{item.id}}">{{item.label}} <i class="fa fa-plus" color="primary" style="cursor:pointer;"
                                (click)="addData(item, i)"></i></div>
                        <div *ngIf="dataAvailable.length == 0" class="noData">Aucune donnée disponible</div>
                    </div>
                </div>
                <div style="display: flex;align-items: center;">
                    <i class="fas fa-arrow-right"></i>
                </div>

                <div class="col-md-6 active-data">
                    <h2><span class="title">Donnée(s) exportée(s)</span> <i class="fa fa-eraser removeAllDatas" color="warn" title="Enlever toutes les données sélectionnées" (click)="removeAllData()"></i></h2>
                    <div cdkDropList #dataExportList="cdkDropList" [cdkDropListData]="dataExport"
                        [cdkDropListConnectedTo]="[dataAvailableList]" class="cdk-list" (cdkDropListDropped)="drop($event)">
                        <div class="columns" *ngFor="let item of dataExport;let i=index" cdkDrag>{{item.label}} <i
                                class="fa fa-minus" color="warn" style="cursor:pointer;" (click)="removeData(i)"></i></div>
                        <div *ngIf="dataExport.length == 0" class="noData">Aucune donnée sélectionnée</div>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>
    </mat-accordion>
</div>

<div mat-dialog-actions class="actions">
    <button mat-raised-button mat-button color="primary" [disabled]="dataExport.length == 0" (click)="exportData();">Exporter</button>
    <button mat-raised-button mat-button [mat-dialog-close]="">Annuler</button>
</div>