<h1 mat-dialog-title>"{{data.action.label_action}}"</h1>
<div mat-dialog-content [class.fullWidth]="redirectMode == 'entity'">
    <div *ngIf="loading" class="loading" style="display:flex;height:100%;">
        <mat-spinner style="margin:auto;"></mat-spinner>
    </div>
    <div class="chooseMode" *ngIf="redirectMode == ''">
        <div>
            <button mat-raised-button (click)="loadEntities()">Vers un service</button>
        </div>
        <div>
            <button mat-raised-button (click)="redirectMode = 'user'">Vers un utilisateur</button>
        </div>
    </div>
    <div *ngIf="redirectMode == 'entity'" class="row" style="display: flex;">
        <div class="redirectContent" style="flex:2">
            <h2>Rediriger vers :</h2>
            <div class="contentEntities">
                <div id="jstree"></div>
            </div>
        </div>
        <div class="redirectContent" style="flex:1">
            <h2 title="{{currentEntity.entity_label}}" >Liste de diffusion "{{currentEntity.entity_label}}" :</h2>
            <div class="contentEntities">
                <app-diffusions-list #appDiffusionsList [injectDatas]="injectDatasParam"></app-diffusions-list>
            </div>
        </div>
    </div>
    <div *ngIf="redirectMode == 'user'" class="row">
        <mat-form-field appearance="outline" floatLabel="never" [style.fontSize.px]="10">
            <input class="metaSearch" type="text" matInput placeholder="SÃ©lectionner un nouvel attributaire">
        </mat-form-field>
        <div class="redirectContent" style="flex:2">
            <h2 style="top:-5px;">Nouvel atributaire :</h2>
            <div class="contentUser">
                <mat-list>
                    <mat-list-item>
                        <mat-icon mat-list-icon class="fa fa-2x fa-user" color="primary"></mat-icon>
                        <h4 mat-line>{{destUser.item_firstname}}
                            {{destUser.item_lastname}}</h4>
                        <p mat-line style="opacity:0.5;">
                            {{destUser.item_entity}} </p>
                    </mat-list-item>
                </mat-list>
            </div>
        </div>
    </div>
</div>
<div mat-dialog-actions class="actions">
    <button *ngIf="redirectMode != ''" mat-raised-button mat-button color="primary" [disabled]="loading" (click)="onSubmit()">{{lang.validate}}</button>
    <button mat-raised-button mat-button [disabled]="loading" [mat-dialog-close]="">{{lang.cancel}}</button>
</div>