<div class="page-header">
    <h1>{{lang.administration}} {{lang.updateStatus}}
    </h1>
</div>
<div *ngIf="loading">
    <mat-spinner style="margin:auto;"></mat-spinner>
</div>
<div *ngIf="!loading" class="container-fluid">
    <div class="col-md-6 col-md-offset-3">
        <form class="form-horizontal" (ngSubmit)="onSubmit()" #updateStatusForm="ngForm">
            <mat-tab-group (selectedTabChange)="resetInput($event)">
                <mat-tab label="{{lang.chronoNumber}}">
                    <div class="alert alert-info" role="alert">
                        {{lang.updateStatusInformationsChrono}}
                    </div>
                    <mat-form-field>
                        <input matInput name="chrono" title="{{lang.chronoNumber}}" placeholder="{{lang.chronoNumber}}" [(ngModel)]="chrono">
                    </mat-form-field>
                </mat-tab>
                <mat-tab label="{{lang.resId}}">
                    <div class="alert alert-info" role="alert">
                        {{lang.updateStatusInformationsGed}}
                    </div>
                    <mat-form-field>
                        <input type="number" matInput name="resId" title="{{lang.resId}}" placeholder="{{lang.resId}}" [(ngModel)]="resId">
                    </mat-form-field>
                </mat-tab>
            </mat-tab-group>
            <mat-form-field>
                <input matInput [formControl]="statusCtrl" name="statusesList" placeholder="{{lang.availableStatuses}}" [(ngModel)]="this.statusId"
                    [matAutocomplete]="auto" required>
                <mat-autocomplete #auto="matAutocomplete">
                    <mat-option *ngFor="let status of filteredStatuses | async" [value]="status.id">
                        {{status.label_status}}
                        <small style="opacity:0.3;">{{status.id}}</small>
                    </mat-option>
                </mat-autocomplete>

            </mat-form-field>
            <div class="col-md-12 text-center" style="padding:10px;">
                <button color="default" mat-mini-fab routerLink='/administration' matTooltip="{{lang.back}}" class="enableAtionTopLeftSmarpthone">
                    <mat-icon class="fa fa-chevron-left"></mat-icon>
                </button>
                <button class="enableAtionBottomCenterSmarpthone" mat-raised-button [disabled]="(!resId && !chrono) || (resId && chrono) || !statusId"
                    color="primary">{{lang.save}}</button>
            </div>
        </form>
    </div>
</div>